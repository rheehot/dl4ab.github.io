{
    "version": "https://jsonfeed.org/version/1",
    "title": "ë”¥ë°±ìˆ˜ â€¢ All posts by \"oauth\" tag",
    "description": "ìš°ë¦¬ëŠ” 'ì§€ì†ê°€ëŠ¥í•œ ë°±ìˆ˜ì§ˆ'ì„ ì§€í–¥í•©ë‹ˆë‹¤. ê³ ë¡œ ì™¸ë¡­ê²Œ ê³µë¶€í•˜ê³  ìˆì„ ë‹¹ì‹ ì„ ì‘ì›í•©ë‹ˆë‹¤. ë”¥ëŸ¬ë‹ì— ê´€ë ¨ëœ ê¸€ ë¿ë§Œ ì•„ë‹ˆë¼, ë°±ìˆ˜ìƒí™œì˜ ë„‹ë‘ë¦¬ë„ í™˜ì˜í•©ë‹ˆë‹¤.",
    "home_page_url": "https://dl4ab.github.io",
    "items": [
        {
            "id": "https://dl4ab.github.io/2020/08/17/slack-bot/",
            "url": "https://dl4ab.github.io/2020/08/17/slack-bot/",
            "title": "ìŠ¬ë™ë´‡ Distribute ê°€ëŠ¥í•˜ê²Œ ë§Œë“¤ê¸° (OAuth)",
            "date_published": "2020-08-17T08:32:54.000Z",
            "content_html": "<p>ë”¥ë°±ìˆ˜ì—ëŠ” ì—¬ëŸ¬ ìŠ¬ë™ë´‡ë“¤ì´ ìƒì£¼í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>\n<p><img src=\"/2020/08/17/slack-bot/timebot_demo.png\" alt=\"ìº˜ë¦¬í¬ë‹ˆì•„/í•œêµ­ ì‹œê°„ ë³€í™˜í•´ì£¼ëŠ” timebot\" /></p>\n<p>ì´ë ‡ê²Œ ë§Œë“¤ì–´ ë‘” ë´‡ì´ ìœ ìš©í•´ì„œ ë‹¤ë¥¸ ìŠ¬ë™ workspace ì—ì„œ ì‚¬ìš©í•˜ê³  ì‹¶ì„ ë•Œê°€ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ê¸° ìœ„í•´ distribute ê°€ëŠ¥í•˜ê²Œ ë´‡ì„ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ê·¸ëŸ¬ê¸° ìœ„í•´ OAuthë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.</p>\n<h2 id=\"oauth-ë€\"><a class=\"markdownIt-Anchor\" href=\"#oauth-ë€\"></a> OAuth ë€?</h2>\n<p>OAuthëŠ” ì—‘ì„¸ìŠ¤ë¥¼ ê´€ë¦¬í•˜ëŠ” ë°©ë²•ì¤‘ì— í‘œì¤€ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤. Aë¼ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ Bì‚¬ì´íŠ¸ì˜ ìœ ì € ì •ë³´ê°€ í•„ìš”í•˜ë‹¤ë©´ Bì‚¬ì´íŠ¸ë¡œ OAuth Request ë¥¼ ë³´ë‚´ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.</p>\n<p>ì—¬ê¸°ì„œ ìŠ¬ë™ë´‡ì´ A ì• í”Œë¦¬ì¼€ì´ì…˜ì´ê³  ìŠ¬ë™ì´ Bì— í•´ë‹¹í•©ë‹ˆë‹¤.</p>\n<h2 id=\"ì‹¤ì œ-slack-ì‘ë™-êµ¬ì¡°\"><a class=\"markdownIt-Anchor\" href=\"#ì‹¤ì œ-slack-ì‘ë™-êµ¬ì¡°\"></a> ì‹¤ì œ Slack ì‘ë™ êµ¬ì¡°</h2>\n<p><img src=\"https://a.slack-edge.com/fbd3c/img/api/articles/oauth_scopes_tutorial/slack_oauth_flow_diagram.png\" alt=\"OAuth\" /></p>\n<p>ìœ„ ê·¸ë¦¼ì—ì„œ êµ¬í˜„í•´ì•¼ ë ê²Œ ë§ì€ ê²ƒìœ¼ë¡œ ë³´ì´ì§€ë§Œ ì‹¤ì œë¡œ <code>GET /api/oauth?code=XXXXX</code> ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì„œë²„ì— ë§Œë“¤ì–´ì£¼ê³  í† í°ì„ ì €ì¥í•  ë°ì´í„°ë² ì´ìŠ¤ë§Œ ìˆìœ¼ë©´ ì™„ì„±ì…ë‹ˆë‹¤.</p>\n<p>ì˜ˆë¥¼ ë“¤ì–´, ìœ ì €ê°€ <a href=\"https://slack.com/oauth/v2/authorize?client_id=288745980535.515443770183&scope=channels:history,channels:join,channels:read,chat:write,chat:write.customize,chat:write.public,commands,dnd:read,emoji:read,groups:history,groups:read,groups:write,im:history,im:read,im:write,links:read,links:write,mpim:history,mpim:read,mpim:write,pins:read,pins:write,reactions:read,reactions:write,reminders:read,reminders:write,remote_files:read,remote_files:share,remote_files:write,team:read,usergroups:read,usergroups:write,users.profile:read,users:read,users:read.email,users:write,app_mentions:read&user_scope=\" target=\"_blank\" rel=\"noopener\"><img alt=\"Add to Slack\" height=\"40\" width=\"139\" src=\"https://platform.slack-edge.com/img/add_to_slack.png\" srcSet=\"https://platform.slack-edge.com/img/add_to_slack.png 1x, https://platform.slack-edge.com/img/add_to_slack@2x.png 2x\" /></a> ì´ ë²„íŠ¼ì„ ëˆ„ë¥´ê³  ë™ì˜ë¥¼ í•˜ê²Œ ë˜ë©´ timebot ì„œë²„ë¡œ GET /api/oauth?code=XXXX ë¦¬í€˜ìŠ¤íŠ¸ë¥¼ ë³´ë‚´ê²Œ ë©ë‹ˆë‹¤. (step 2 ì— í•´ë‹¹)</p>\n<p>ê·¸ëŸ¼ ì´ code=XXX ë¥¼ ì‚¬ìš©í•˜ì—¬ ìŠ¬ë™ ì„œë²„ì— OAuth ìš”ì²­ì„ ë³´ë‚´ê³ (step 3) ë°›ì€ í† í°ì„ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•´ì£¼ë©´ ë©ë‹ˆë‹¤ (step 4).</p>\n<p>ìˆ˜ë„ ì½”ë“œëŠ” ì•„ë˜ì™€ ê°™ì´ ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">OauthHandler</span><span class=\"params\">(writer http.ResponseWriter, request *http.Request)</span></span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// GET ?code=XXXX ì½ìŒ</span></span><br><span class=\"line\">  code, ok := request.URL.Query()[<span class=\"string\">\"code\"</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// CODEë¥¼ ë³´ëƒ„ (POST https://api.slack.com/methods/oauth.v2.access)</span></span><br><span class=\"line\">  resp, err := getOAuthV2Response(slackClientId, slackClientSecret, code[<span class=\"number\">0</span>], <span class=\"string\">\"\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// TeamID ë° AccessToken ì €ì¥</span></span><br><span class=\"line\">  store(resp.TeamID, resp.AccessToken)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// ... send ok response</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>POST https://api.slack.com/methods/oauth.v2.access</code> ì˜ ì˜ˆì‹œ response</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"ok\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"access_token\"</span>: <span class=\"string\">\"xoxb-17653672481-19874698323-pdFZKVeTuE8sk7oOcBrzbqgy\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"token_type\"</span>: <span class=\"string\">\"bot\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"scope\"</span>: <span class=\"string\">\"commands,incoming-webhook\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"bot_user_id\"</span>: <span class=\"string\">\"U0KRQLJ9H\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"app_id\"</span>: <span class=\"string\">\"A0KRD7HC3\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"team\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"name\"</span>: <span class=\"string\">\"Slack Softball Team\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"id\"</span>: <span class=\"string\">\"T9TK3CUKW\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">\"enterprise\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"name\"</span>: <span class=\"string\">\"slack-sports\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"id\"</span>: <span class=\"string\">\"E12345678\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">\"authed_user\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"id\"</span>: <span class=\"string\">\"U1234\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"scope\"</span>: <span class=\"string\">\"chat:write\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"access_token\"</span>: <span class=\"string\">\"xoxp-1234\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"token_type\"</span>: <span class=\"string\">\"user\"</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ì´ë•Œ TeamID(workspace) ì™€ ì½”ë“œë¥¼ í•¨ê»˜ ì €ì¥í•´ì£¼ë©´ ë‚˜ì¤‘ì— ìœ ì € ë©”ì‹œì§€ë¡œë¶€í„° ë°˜ì‘í•˜ëŠ” ë´‡ì„ ë§Œë“¤ë•Œ ìœ ì € ë©”ì‹œì§€ì— í¬í•¨ëœ TeamIDë¥¼ ì½ì–´ Access Token ì„ DBì—ì„œ ë¶ˆëŸ¬ì˜¤ëŠ” ì‹ìœ¼ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>\n<p><img src=\"/2020/08/17/slack-bot/timebot_sequential.svg\" alt=\"timebot ìˆœì„œë„\" /></p>\n<p>ìì„¸í•œ ë‚´ìš©ì€ <a href=\"https://bit.ly/2Sqdnws\" target=\"_blank\" rel=\"noopener\">https://bit.ly/2Sqdnws</a> ì— ì°¸ì—¬í•˜ì…”ì„œ ë¬¸ì˜ì£¼ì„¸ìš” ğŸ˜„</p>\n",
            "tags": [
                "Mo Kweon",
                "go",
                "slack",
                "bot",
                "oauth"
            ]
        }
    ]
}